# X.509 Spiffe Verifiable Identity Document (SVID) test suite

The [X.509-SVID](/standards/X509-SVID.md) is a subset of the X.509 specification that can be reliably and safely used by two SPIFFE services to mutually authenticate each other. For this certificate format to be useful, it is ideal if it can be correctly verified by (and, optionally, generated by) a wide range of TLS libraries.

This repository provides a test suite for generating and verifying X509-SVIDs according to the public specification. It is useful both to verify that the specification as written is compatible with a range of TLS libraries, and as an exemplar codebase for generating these certificates.

## Installing the test suite

Running this test suite will require:
* Make
* Python 2.7+
* Virtualenv
* Docker (17.03.1-ce or higher reccomnded)

To install, clone this repository into a suitable location.

## Generating Certificates

First, you need to generate a set of SVIDs. To do this:

```
make generate
```

For more information, see [the documentation on certificate generation](generate/README.md)

## Running the test suite

To test that the certificates you just generated can actually be verified, run:

```
make verify
```

The output of this should be a report showing which tests succeeeded. For more information,
refer to [the documentation on the test suite](verify/README.md).

## Cleaning up

To remove generated certificates and python virtualenv, run:

```
make clean
```

## Running on Windows

### Requirements

[VirtualBox](https://www.virtualbox.org/wiki/Downloads)

[Vagrant](https://www.vagrantup.com/downloads.html)

### Starting your environment

Note: In order to avoid issues with the sh files you need to set **core.autocrlf = input** in your git config (normaly under C:\ProgramData\Git).

```bash
vagrant up
# wait for it...
vagrant ssh
cd /vagrant
# from this point you will be at the root of the svid-test directory
# and be able to run any of the make rules without having to worry about the requirements.
```
